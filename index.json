
[{"content":" Introduction # This is bold text, and this is emphasized text.\nVisit the Hugo website!\n信号量方法 # init 设置计数器的初始值 down 计数器的值减 1；如果此时计数器的值小于 0，则当前线程将被阻塞 up 计数器的值加 1；如果此时计数器的值小于或者等于 0，则唤醒等待队列中的一个线程（只能唤醒一个），并将其从等待队列中移除 这三个方法都是原子性的\nsemaphore 示例 # static int count; static final Semaphore semaphore = new Semaphore(1); static void addOne() { // 阻塞获取许可 semaphore.acquire(); try { count += 1; } finally { semaphore.release(); } } semaphore 可以允许多个线程访问一个临界区\nclass ObjectPool\u0026lt;T, R\u0026gt; { final List\u0026lt;T\u0026gt; pool; final Semaphore semaphore; ObjectPool(int size, T t) { pool = new Vector\u0026lt;T\u0026gt;(){}; for (int i = 0; i \u0026lt; size; ++i) { pool.add(t); } semaphore = new Semaphore(size); } R exec(Function\u0026lt;T, R\u0026gt; func) { T t = null; semaphore.acquire(); try { t = pool.remove(0); return func.apply(t); } finally { pool.add(t); semaphore.release(); } } } ObjectPool\u0026lt;Long, String\u0026gt; pool = new ObjectPool\u0026lt;Long, String\u0026gt;(10, 2); pool.exec(t -\u0026gt; { return t.toString(); }); Semaphore VS 锁 # Semaphore 若将 permits 的值设为 1，类似于锁但又与一般的锁不同\n一般锁只能由持有锁的线程释放，而 Semaphore 只是表示一个许可数，任意线程都可以调用其 release 方法 Semaphore 不可重入，每次 acquire 调用都会消耗一个许可 ","date":"18 April 2024","externalUrl":null,"permalink":"/posts/my-first-post/","section":"Posts","summary":"Introduction # This is bold text, and this is emphasized text.","title":"My First Post","type":"posts"},{"content":"","date":"18 April 2024","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","date":"18 April 2024","externalUrl":null,"permalink":"/","section":"梦里不知身是客","summary":"","title":"梦里不知身是客","type":"page"},{"content":"","date":"1 January 0001","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","date":"1 January 0001","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"1 January 0001","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","date":"1 January 0001","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"}]